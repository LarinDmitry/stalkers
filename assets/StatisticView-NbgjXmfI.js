import{k as z,n as q,r as g,o as W,j as e,p as B,q as J,t as K,u as E,a as N,s as j,g as M,d as l,b as Q,a4 as b,e as X,i as ee,R as ne,f as se,S as ae}from"./index-BPKfZC-y.js";import{B as te}from"./BackBtn-BPLfiP42.js";import{P as _}from"./Paper-DmF7PFN4.js";import{d as ie,T as w,c as T,b as c,a as f}from"./TableRow-ydKvuKtj.js";import{T as y}from"./TableContainer-D4PXtNfc.js";import{P as Z}from"./GlobalStyled-CYDI3xR9.js";import{T as oe}from"./Tooltip-C8oDmorq.js";import"./useTheme-SbHo1OdK.js";import"./useTheme-CGbdx9B9.js";import"./useSlot-BoTIWq8K.js";import"./ownerDocument-DW-IO8s5.js";function re(n){return z("MuiTableHead",n)}q("MuiTableHead",["root"]);const le=n=>{const{classes:s}=n;return K({root:["root"]},re,s)},ce=B("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(n,s)=>s.root})({display:"table-header-group"}),de={variant:"head"},G="thead",R=g.forwardRef(function(s,a){const t=W({props:s,name:"MuiTableHead"}),{className:d,component:o=G,...m}=t,i={...t,component:o},r=le(i);return e.jsx(ie.Provider,{value:de,children:e.jsx(ce,{as:o,className:J(r.root,d),ref:a,role:o===G?null:"rowgroup",ownerState:i,...m})})}),me={TOP_PLAYERS:"Top players of last SEs",DAMAGE_DECREASE:"Damage decrease",ZERO_DAMAGE:"Zero damage at last SE",JINNI_COEF:"Disbalance factor",FORMULA:"Equation:",WHERE:"where",COUNT:"— number of players.",DAMAGE:"— player`s damage",AVERAGE_DAMAGE:"— average damage",AVERAGE_COUNT:"arithmetic average",SMALL:"0.2−0.3: Damage is distributed fairly evenly.",MEDIUM:"0.5: Moderate inequality. There are a few players with significantly larger contributions, but the others also make a noticeable impact.",HARD:'0.8−1.0: Severe inequality. Damage is mainly concentrated among one or a few "top" players, while the rest have almost no impact on the overall result.',DATE:"Date",TOP:"Top 1,2,3",PERCENT:"% of overall damage",JINNI:"The Gini coefficient.",DAMAGE_GUILD:"Guild damage, B",CHANGES:"Changes",INCREASE:"Increased by",DECREASE:"Decreased by",DAY:"Day",LAST_ZVEK:"Last SE Damage, T",ALL_PLAYERS_HAVE_DAMAGED:"All players damaged in all days"},he={TOP_PLAYERS:"Топ гравці останніх Звек",DAMAGE_DECREASE:"Зниження урону",ZERO_DAMAGE:"Нульовий урон останнього ЗВЕК",JINNI_COEF:"Коефіцієнт дисбалансу",FORMULA:"Формула:",WHERE:"де",COUNT:"— кількість гравців.",DAMAGE:"— пошкодження гравця",AVERAGE_DAMAGE:"— середні пошкодження",AVERAGE_COUNT:"середнє арифметичне",SMALL:"0.2−0.3: Шкода розподілена досить рівномірно.",MEDIUM:"0.5: Помірна нерівність. Є кілька гравців із помітно більшим внеском, та решта теж вносять відчутний внесок.",HARD:'0.8−1.0: Сильна нерівність. Шкода в основному зосереджена в одного чи кількох "топових" гравців, решта майже не впливає на загальний результат.',DATE:"Дата",TOP:"Топ 1,2,3",PERCENT:"% від усієї шкоди",JINNI:"Коефіцієнт Джинні",DAMAGE_GUILD:"Шкода гільдії, T",CHANGES:"Зміна",INCREASE:"Збільшився на",DECREASE:"Зменшився на",DAY:"День",LAST_ZVEK:"Урон прошлого ЗВЭК (млрд)",ALL_PLAYERS_HAVE_DAMAGED:"Всі гравці нанесли урон у всі дні"},pe={TOP_PLAYERS:"Топ игроки последних Звэк",DAMAGE_DECREASE:"Снижение урона",ZERO_DAMAGE:"Нулевой дамаг последнего Звэк",JINNI_COEF:"Коэффициент дисбаланса",FORMULA:"Формула:",WHERE:"где",COUNT:"— количество игроков.",DAMAGE:"— урон игрока",AVERAGE_DAMAGE:"— средний урон",AVERAGE_COUNT:"среднее арифметическое",SMALL:"0.2−0.3: Урон распределён довольно равномерно.",MEDIUM:"0.5: Умеренное неравенство. Есть несколько игроков с заметно большим вкладом, но остальные тоже вносят ощутимый вклад.",HARD:'0.8−1.0: Сильное неравенство. Урон в основном сосредоточен у одного или нескольких "топовых" игроков, остальные почти не влияют на общий результат.',DATE:"Дата",TOP:"Топ 1,2,3",PERCENT:"% от всего урона",JINNI:"Коэффициент Джинни",DAMAGE_GUILD:"Урон гильдии, T",CHANGES:"Изменение",INCREASE:"Увеличился на",DECREASE:"Уменьшился на",DAY:"День",LAST_ZVEK:"Урон прошлого ЗВЭК (млрд)",ALL_PLAYERS_HAVE_DAMAGED:"Все игроки нанесли урон во все дни"},ge={en:me,uk:he,ru:pe},D=n=>ge[n],ue=n=>n.reduce((s,a)=>s+n.reduce((t,d)=>t+Math.abs(a-d),0),0)/(2*n.length**2*n.reduce((s,a)=>s+a,0)/n.length),S=()=>{const{latestZveks:n}=E(N);return n.reduce((s,{name:a,info:t})=>{var o;const d=(o=t[t.length-1])==null?void 0:o.damageByDay.reduce((m,i,r)=>(i===0&&m.push(r+1),m),[]);return d.length>0&&s.push({name:a,zeroDays:d}),s},[])},xe=()=>{const{language:n}=E(j),{guildStatistic:s}=E(N),{DATE:a,DAMAGE_GUILD:t,CHANGES:d}=D(n),{NO_DATA:o,GUILD_RATING:m,NEWBIES:i}=M(n),r=[a,t,d,m,i];return e.jsx(Ee,{component:_,children:e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(v,{children:r.map(p=>e.jsx(Ae,{children:p},p))})}),e.jsx(T,{children:Q().map(({total:p,percentageChange:u,date:x},h)=>{var C;const A=h>0?u===null?o:`${u>0?">":"<"} ${Math.abs(u).toFixed(2)}%`:"—";return e.jsxs(v,{children:[e.jsx(c,{align:"center",children:x}),e.jsx(c,{align:"center",children:(p/1e12).toFixed(2)}),e.jsx(c,{align:"center",children:e.jsx(L,{value:u,children:A})}),e.jsx(c,{align:"center",children:e.jsx(L,{value:((C=s[h-1])==null?void 0:C.rate)-s[h].rate,children:s[h].rate})}),e.jsx(c,{align:"center",children:e.jsx(je,{value:s[h].newbies,children:s[h].newbies})})]},`guild-${h}`)})})]})})},Ee=l(y).withConfig({displayName:"DamageGrow__Container",componentId:"sc-1jyvju1-0"})(["&.MuiPaper-root{margin:0 1rem;width:calc(100% - 2rem);}"]),v=l(f).withConfig({displayName:"DamageGrow__Row",componentId:"sc-1jyvju1-1"})(["&.MuiTableRow-root{display:grid;grid-template-columns:repeat(5,1fr);}"]),Ae=l(c).withConfig({displayName:"DamageGrow__HCell",componentId:"sc-1jyvju1-2"})(["&.MuiTableCell-root{",";text-align:center;}"],b),L=l.span.withConfig({displayName:"DamageGrow__ChangeText",componentId:"sc-1jyvju1-3"})(["color:",";"],({value:n,theme:{colors:{red100:s,green100:a,gray100:t}}})=>n===null||n===0?t:n>0?a:n<0?s:t),je=l.span.withConfig({displayName:"DamageGrow__NewbiesText",componentId:"sc-1jyvju1-4"})(["color:",";"],({value:n,theme:{colors:{green100:s,gray100:a}}})=>n===0?a:s),De=()=>{const{language:n}=E(j),{latestZveks:s}=E(N),{LAST_ZVEK:a,DECREASE:t}=D(n),{NICKNAME:d,LATEST_ZVEK:o}=M(n),m=g.useMemo(()=>s.reduce((r,{name:p,info:u})=>{const[x,h]=u.slice(-2),A=(h.damage-x.damage)/x.damage*100;return A<0&&r.push({name:p,damageLastZvek:h.damage,damagePreviousZvek:x.damage,percentageChange:A}),r},[]),[]),i=g.useMemo(()=>[d,a,o,t],[d,a,o,t]);return e.jsx(Ce,{component:_,children:m.length?e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(P,{children:i.map(r=>e.jsx(_e,{align:"center",children:r},r))})}),e.jsx(T,{children:m.map(({name:r,damagePreviousZvek:p,damageLastZvek:u,percentageChange:x})=>{const h=`< на ${Math.abs(x).toFixed(2)}%`;return e.jsxs(P,{children:[e.jsx(c,{align:"center",children:r}),e.jsx(c,{align:"center",children:(p/1e9).toFixed(2)}),e.jsx(c,{align:"center",children:(u/1e9).toFixed(2)}),e.jsx(c,{align:"center",children:e.jsx(we,{percentage:x,children:h})})]},r)})})]}):e.jsx(Te,{children:"У всех игроков урон вырос"})})},Ce=l(y).withConfig({displayName:"DamageDecrease__Container",componentId:"sc-ct19x1-0"})(["&.MuiPaper-root{margin:0 1rem;width:calc(100% - 2rem);}"]),P=l(f).withConfig({displayName:"DamageDecrease__Row",componentId:"sc-ct19x1-1"})(["&.MuiTableRow-root{display:grid;grid-template-columns:repeat(4,1fr);}"]),_e=l(c).withConfig({displayName:"DamageDecrease__HCell",componentId:"sc-ct19x1-2"})(["&.MuiTableCell-root{",";text-align:center;}"],b),we=l.span.withConfig({displayName:"DamageDecrease__ChangeText",componentId:"sc-ct19x1-3"})(["color:",";"],({percentage:n,theme:{colors:{red100:s,green100:a,gray100:t}}})=>n===null||n===0?t:n>0?a:s),Te=l.div.withConfig({displayName:"DamageDecrease__Plug",componentId:"sc-ct19x1-4"})(["",";color:",";text-align:center;"],Z,({theme:n})=>n.colors.green100),fe=()=>{const{language:n}=E(j),{DATE:s,TOP:a,PERCENT:t}=D(n),d=[s,a,t];return e.jsx(ye,{component:_,children:e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(H,{children:d.map(o=>e.jsx(c,{align:"center",children:e.jsx("b",{children:o})},o))})}),e.jsx(T,{children:X(3).map(({date:o,topPlayers:m,topDamagePercentage:i},r)=>e.jsxs(H,{children:[e.jsx(c,{align:"center",children:o}),e.jsx(c,{align:"center",children:m.join(", ")}),e.jsxs(c,{align:"center",children:[i.toFixed(2),"%"]})]},r))})]})})},ye=l(y).withConfig({displayName:"TopPlayers__Container",componentId:"sc-594h46-0"})(["&.MuiPaper-root{margin:0 1rem;width:calc(100% - 2rem);}"]),H=l(f).withConfig({displayName:"TopPlayers__Row",componentId:"sc-594h46-1"})(["&.MuiTableRow-root{display:grid;grid-template-columns:repeat(3,1fr);}"]),Re=()=>{const{language:n}=E(j),{DAY:s,ALL_PLAYERS_HAVE_DAMAGED:a}=D(n),{NICKNAME:t}=M(n),d=g.useMemo(()=>[t,s],[s,t]);return e.jsx(Ne,{component:_,children:S().length?e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(O,{children:d.map(o=>e.jsx(Me,{children:o},o))})}),e.jsx(T,{children:S().map(({name:o,zeroDays:m})=>e.jsxs(O,{children:[e.jsx(c,{align:"center",children:o}),e.jsx(c,{align:"center",children:e.jsx(Ie,{children:m.map(i=>`${i}й`).join(", ")})})]},o))})]}):e.jsx(be,{children:a})})},Ne=l(y).withConfig({displayName:"ZeroDamage__Container",componentId:"sc-qyo35u-0"})(["&.MuiPaper-root{margin:0 1rem;width:calc(100% - 2rem);}"]),O=l(f).withConfig({displayName:"ZeroDamage__Row",componentId:"sc-qyo35u-1"})(["&.MuiTableRow-root{display:grid;grid-template-columns:repeat(2,1fr);}"]),Me=l(c).withConfig({displayName:"ZeroDamage__HCell",componentId:"sc-qyo35u-2"})(["&.MuiTableCell-root{",";text-align:center;}"],b),be=l.div.withConfig({displayName:"ZeroDamage__Plug",componentId:"sc-qyo35u-3"})(["",";color:",";text-align:center;"],Z,({theme:n})=>n.colors.green100),Ie=l.div.withConfig({displayName:"ZeroDamage__Skipped",componentId:"sc-qyo35u-4"})(["color:",";"],({theme:n})=>n.colors.red100),Ge=()=>{const{language:n}=E(j),{latestZveks:s}=E(N),a=g.useMemo(()=>Array.from(new Set(s.flatMap(({info:i})=>i.map(({date:r})=>r)))).filter(i=>i!=="xx.xx"),[]),t=g.useMemo(()=>a.map(i=>({date:i,gini:ue(s.map(({info:r})=>{var p;return((p=r.find(u=>u.date===i))==null?void 0:p.damage)||0}))})),[a]),{DATE:d,JINNI:o}=D(n),m=[d,o];return e.jsx(Se,{component:_,children:e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(V,{children:m.map(i=>e.jsx(ve,{children:i},i))})}),e.jsx(T,{children:t.map(({date:i,gini:r})=>e.jsxs(V,{children:[e.jsx(c,{align:"center",children:i}),e.jsx(c,{align:"center",children:r.toFixed(4)})]},i))})]})})},Se=l(y).withConfig({displayName:"Djinni__Container",componentId:"sc-13bgkp6-0"})(["&.MuiPaper-root{margin:0 1rem;width:calc(100% - 2rem);}"]),V=l(f).withConfig({displayName:"Djinni__Row",componentId:"sc-13bgkp6-1"})(["&.MuiTableRow-root{display:grid;grid-template-columns:repeat(2,1fr);}"]),ve=l(c).withConfig({displayName:"Djinni__HCell",componentId:"sc-13bgkp6-2"})(["&.MuiTableCell-root{",";text-align:center;}"],b),Le=({title:n,titleId:s,...a},t)=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 512 512",ref:t,"aria-labelledby":s,...a},n?g.createElement("title",{id:s},n):null,g.createElement("path",{fillRule:"nonzero",d:"M256 0c70.691 0 134.695 28.656 181.021 74.979C483.344 121.305 512 185.309 512 256c0 70.691-28.656 134.695-74.979 181.018C390.695 483.344 326.691 512 256 512c-70.691 0-134.695-28.656-181.018-74.982C28.656 390.695 0 326.691 0 256S28.656 121.305 74.982 74.979C121.305 28.656 185.309 0 256 0zm-10.029 160.379c0-4.319.761-8.315 2.282-11.988 1.515-3.66 3.797-6.994 6.836-9.98 3.028-2.98 6.341-5.241 9.916-6.758 3.593-1.511 7.463-2.282 11.603-2.282 4.143 0 8.006.771 11.564 2.278 3.561 1.521 6.828 3.782 9.808 6.779 2.976 2.987 5.212 6.31 6.695 9.973 1.489 3.663 2.236 7.659 2.236 11.978 0 4.195-.739 8.128-2.229 11.767-1.483 3.631-3.709 6.993-6.692 10.046-2.965 3.043-6.232 5.342-9.79 6.878-3.569 1.528-7.432 2.306-11.592 2.306-4.259 0-8.206-.764-11.834-2.278-3.604-1.522-6.913-3.807-9.892-6.832-2.973-3.046-5.209-6.383-6.685-10.032-1.486-3.646-2.226-7.596-2.226-11.855zm13.492 179.381c-1.118 4.002-3.375 11.837 3.316 11.837 1.451 0 3.299-.81 5.5-2.412 2.387-1.721 5.125-4.336 8.192-7.799 3.116-3.53 6.362-7.701 9.731-12.507 3.358-4.795 6.888-10.292 10.561-16.419a1.39 1.39 0 011.907-.484l12.451 9.237c.593.434.729 1.262.34 1.878-5.724 9.952-11.512 18.642-17.362 26.056-5.899 7.466-11.879 13.66-17.936 18.553l-.095.07c-6.057 4.908-12.269 8.602-18.634 11.077-17.713 6.86-45.682 5.742-53.691-14.929-5.062-13.054-.897-27.885 3.085-40.651l20.089-60.852c1.286-4.617 2.912-9.682 3.505-14.439.974-7.915-2.52-13.032-11.147-13.032h-17.562a1.402 1.402 0 01-1.395-1.399l.077-.484 4.617-16.801a1.39 1.39 0 011.356-1.02l89.743-2.815a1.39 1.39 0 011.434 1.34l-.063.445-38.019 125.55zm151.324-238.547C371.178 61.606 316.446 37.101 256 37.101c-60.446 0-115.174 24.501-154.784 64.112C61.606 140.822 37.101 195.554 37.101 256c0 60.446 24.505 115.178 64.115 154.784 39.606 39.61 94.338 64.115 154.784 64.115s115.178-24.505 154.787-64.115c39.611-39.61 64.112-94.338 64.112-154.784s-24.505-115.178-64.112-154.787z"})),Pe=g.forwardRef(Le),Qe=()=>{const{language:n}=E(j),s=ee();g.useEffect(()=>{ne.send({hitType:"statistic",page:s.pathname})},[]);const{TOP_PLAYERS:a,DAMAGE_DECREASE:t,ZERO_DAMAGE:d,JINNI_COEF:o,FORMULA:m,WHERE:i,COUNT:r,DAMAGE:p,AVERAGE_DAMAGE:u,AVERAGE_COUNT:x,SMALL:h,MEDIUM:A,HARD:C}=D(n),{GROW:I}=M(n),F=g.useMemo(()=>[{title:I,value:e.jsx(xe,{})},{title:a,value:e.jsx(fe,{})},{title:t,value:e.jsx(De,{})},{title:d,value:e.jsx(Re,{})},{title:e.jsxs(g.Fragment,{children:[o,e.jsx(oe,{title:e.jsx(U,{children:e.jsxs("li",{children:[m,e.jsxs(Ue,{children:["G=",e.jsxs("span",{children:[e.jsxs("div",{children:["Σ",e.jsx("sub",{children:"i=1"}),e.jsx("sup",{className:"top-el",children:"n"})]}),e.jsxs("div",{children:["Σ",e.jsx("sub",{children:"j=1"}),e.jsx("sup",{className:"top-el",children:"n"}),"|x",e.jsx("sub",{children:"i"})," - x",e.jsx("sub",{children:"j"}),"|"]})]}),"/",e.jsxs("span",{children:["2n",e.jsx("sup",{children:"2"}),"μ, ",i,":"]})]}),e.jsxs(U,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"n"})," ",r]}),e.jsxs("li",{children:[e.jsxs("b",{children:["x",e.jsx("sub",{children:"i"})]}),p," ",e.jsx("i",{children:"i"}),"."]}),e.jsxs("li",{children:[e.jsx("b",{children:"μ"})," ",u," (",e.jsx("i",{children:x}),")."]})]}),e.jsx("li",{children:h}),e.jsx("li",{children:A}),e.jsx("li",{children:C})]})}),children:e.jsx(Ve,{children:e.jsx(Pe,{})})})]}),value:e.jsx(Ge,{})}],[I,a,t,d,o,m,i,r,p,u,x,h,A,C]);return e.jsxs(He,{children:[e.jsx(te,{}),F.map(({title:$,value:k},Y)=>e.jsxs(g.Fragment,{children:[e.jsx(Oe,{children:$}),k]},Y))]})},He=l.div.withConfig({displayName:"StatisticView__Wrapper",componentId:"sc-xishe4-0"})(["height:100%;overflow:auto;padding:1rem 1rem 1.5rem;"]),Oe=l.div.withConfig({displayName:"StatisticView__Title",componentId:"sc-xishe4-1"})(["",";margin:1rem;display:flex;align-items:center;"],se),U=l.ul.withConfig({displayName:"StatisticView__List",componentId:"sc-xishe4-2"})(["padding:0 0 0 1rem;& + li{margin:0.5rem 0;}"]),Ve=l(ae).withConfig({displayName:"StatisticView__Hint",componentId:"sc-xishe4-3"})(["&.MuiSvgIcon-root{cursor:pointer;fill:",";height:1rem;width:1rem;margin-left:0.5rem;animation:pulse 5s infinite;}"],({theme:n})=>n.colors.blue090),Ue=l.div.withConfig({displayName:"StatisticView__Formula",componentId:"sc-xishe4-4"})(["font-family:'Courier New',Courier,monospace;display:flex;flex-direction:row;align-items:center;span{margin:0.2rem 0;display:flex;.top-el{position:relative;right:14px;}}"]);export{Qe as default};
