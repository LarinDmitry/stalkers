import{r as s,u as f,s as N,a as R,b as H,g as Z,j as a,d as l,f as O,m as Y,S as W,l as z,c as q,e as k,h as U,i as Q,R as J}from"./index-BPKfZC-y.js";import{D as K,C as $,A as X,p as G,a as ee,b as V,L as ae,c as te,d as re,P as oe,e as ne,i as se}from"./index-DzYYcT_k.js";import{T as ie,a as F,b as S,c as le}from"./TableRow-ydKvuKtj.js";const ce={TOP_PLAYERS:"Top-5 players",OTHERS:"Others",NAME:"Nickname",DAMAGE:"Damage, Т",IMPACT:"Impact",BEST:"Best transformation",TOTAL:"Guild total",RATE:"Rate",NEW:"Newbies"},de={TOP_PLAYERS:"Топ-5 гравців",OTHERS:"Решта",NAME:"Нік",DAMAGE:"Дамаг, Т",IMPACT:"Вклад",BEST:"Найкращий ріст",TOTAL:"Урон гільдії",RATE:"Рейтинг",NEW:"Новачки"},pe={TOP_PLAYERS:"Топ-5 игроков",OTHERS:"Остальные",NAME:"Ник",DAMAGE:"Урон, Т",IMPACT:"Вклад",BEST:"Лучший рост",TOTAL:"Урон гильдии",RATE:"Рейтинг",NEW:"Новички"},ge={en:ce,uk:de,ru:pe},L=e=>ge[e],me=({title:e,titleId:o,...t},i)=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:i,"aria-labelledby":o,...t},e?s.createElement("title",{id:o},e):null,s.createElement("path",{d:"M6.25 18.75C5.86 18.36 5.86 17.74 6.25 17.35L17.625 6H10.5C10.086 6 9.75 5.664 9.75 5.25C9.75 4.836 10.086 4.5 10.5 4.5H19.5C19.7656 4.5 20.0196 4.60516 20.2071 4.79264C20.3946 4.98012 20.5 5.23413 20.5 5.5V14.5C20.5 14.914 20.164 15.25 19.75 15.25C19.336 15.25 19 14.914 19 14.5V7.0607L7.375 18.75C6.985 19.14 6.365 19.14 6.25 18.75Z"})),ue=s.forwardRef(me),he=({title:e,titleId:o,...t},i)=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:i,"aria-labelledby":o,...t},e?s.createElement("title",{id:o},e):null,s.createElement("path",{d:"M6.25 6.25C5.86 6.64 5.86 7.26 6.25 7.65L17.625 19H10.5C10.086 19 9.75 19.336 9.75 19.75C9.75 20.164 10.086 20.5 10.5 20.5H19.5C19.7656 20.5 20.0196 20.3948 20.2071 20.2074C20.3946 20.0199 20.5 19.7659 20.5 19.5V12.5C20.5 12.086 20.164 11.75 19.75 11.75C19.336 11.75 19 12.086 19 12.5V17.0607L7.375 6.25C6.985 5.86 6.365 5.86 6.25 6.25Z"})),xe=s.forwardRef(he),be=()=>{const{language:e}=f(N),{latestZveks:o,guildStatistic:t}=f(R),i=H(),x=s.useMemo(()=>o.reduce((d,{name:j,info:A})=>{const[C,T]=A.slice(-2);if(!C||!T||C.damage===0)return d;const I=(T.damage-C.damage)/C.damage*100;return d.push({name:j,damageLastZvek:T.damage,damagePreviousZvek:C.damage,percentageChange:I}),d},[]).sort((d,j)=>j.percentageChange-d.percentageChange),[]),m=i==null?void 0:i[2],p=(m==null?void 0:m.percentageChange)??null,{rate:w=0,newbies:h=0}=(t==null?void 0:t[2])||{},{rate:y=0}=(t==null?void 0:t[1])||{},r=d=>d==null?null:d?a.jsx(ue,{}):a.jsx(xe,{}),{BEST:n}=L(e),{NO_DATA:c,GROW:v,GUILD_RATING:g,NEWBIES:b}=Z(e),_=p===null?c:`${p>0?"+":"-"}${Math.abs(p).toFixed(2)}%`,u=y-w,E=[{key:"total",value:a.jsx(D,{children:m!=null&&m.total?`${(m.total/1e12).toFixed(0)} T`:c}),isPositive:p!==null&&p>0,percent:p===0?"":_,icon:r(p!==null&&p>0),label:v},{key:"best",value:a.jsx(D,{children:x[0].name}),isPositive:x[0].percentageChange>0,percent:`+${x[0].percentageChange.toFixed(2)}%`,icon:r(x[0].percentageChange>0),label:n},{key:"rating",value:a.jsx(M,{value:u,children:w}),isPositive:u>0,percent:u===0?"":u>0?`(+${u})`:`(-${-u})`,icon:u===0?null:r(u>0),label:g},{key:"newbies",value:a.jsx(M,{value:h,children:h}),isPositive:h>0,percent:null,icon:h===0?null:r(h>0),label:b}];return a.jsx(Ce,{children:E.map(({key:d,value:j,isPositive:A,percent:C,icon:T,label:I})=>a.jsxs(we,{children:[j,C===null?a.jsx("div",{}):a.jsx(fe,{positive:A,children:C}),T===null?a.jsx("div",{}):a.jsx(ye,{positive:A,children:T}),a.jsx(Te,{children:I})]},d))})},Ce=l.div.withConfig({displayName:"Bars__Wrapper",componentId:"sc-1hin37r-0"})(["display:grid;grid-template-columns:repeat(4,1fr);grid-column-gap:1rem;@media ","{grid-template-columns:1fr;grid-row-gap:1rem;}"],({theme:e})=>e.breakpoints.maxTb),we=l.div.withConfig({displayName:"Bars__Box",componentId:"sc-1hin37r-1"})(["display:grid;grid-template-columns:1fr auto auto;gap:0.3rem;padding:1rem 0.5rem 0.5rem 1rem;border-radius:6px;background-color:",";box-shadow:0 2px 1px -1px rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 1px 3px 0 rgba(0,0,0,0.12);"],({theme:e})=>e.colors.gray000),Te=l.div.withConfig({displayName:"Bars__Text",componentId:"sc-1hin37r-2"})(["",";white-space:nowrap;"],Y),D=l.div.withConfig({displayName:"Bars__Value",componentId:"sc-1hin37r-3"})(["",";"],O),M=l.span.withConfig({displayName:"Bars__ChangeText",componentId:"sc-1hin37r-4"})(["",";color:",";"],O,({value:e,theme:{colors:{green100:o,red100:t,gray100:i}}})=>e===null?i:e>0?o:e<0?t:i),fe=l.div.withConfig({displayName:"Bars__Percent",componentId:"sc-1hin37r-5"})(["color:",";"],({positive:e,theme:{colors:{green100:o,red100:t}}})=>e?o:t),ye=l(W).withConfig({displayName:"Bars__Icon",componentId:"sc-1hin37r-6"})(["&.MuiSvgIcon-root{width:1.4rem;height:1.4rem;padding:0.2rem;background-color:",";border-radius:3px;fill:",";}"],({positive:e})=>e?"rgba(68, 217, 38, 0.15)":"rgba(235, 72, 99, 0.15)",({positive:e,theme:{colors:{green100:o,red100:t}}})=>e?o:t),B=z(["background:",";border-radius:6px;box-shadow:0 2px 1px -1px rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 1px 3px 0 rgba(0,0,0,0.12);"],({theme:e})=>e.colors.gray000),ve=({title:e,titleId:o,...t},i)=>s.createElement("svg",{width:16,height:16,viewBox:"1 1 11 11",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":o,...t},e?s.createElement("title",{id:o},e):null,s.createElement("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"})),P=s.forwardRef(ve);$.register(X,G,ee,V);const _e=()=>{const e=q(),{language:o}=f(N),{latestZveks:t}=f(R),{NAME:i,TOTAL:x,DAMAGE:m,IMPACT:p,TOP_PLAYERS:w,OTHERS:h}=L(o),y=s.useMemo(()=>t.map(({name:g,info:b})=>({name:g,damage:b[b.length-1].damage,guildTotal:b[b.length-1].guildTotal})),[]),r=k(5)[2].guildTotal,n=k(5)[2].topDamagePercentage,c={labels:[w,h],datasets:[{data:[n*r,(100-n)*r],backgroundColor:["rgba(72, 99, 235, 0.7)","rgba(68, 217, 38, 0.7)"],hoverOffset:4}]},v=[i,m,p,""];return a.jsxs(Ee,{children:[a.jsxs(je,{children:[a.jsx(ke,{children:a.jsx(K,{data:c,options:{responsive:!0,plugins:{datalabels:{display:!1}}}})}),a.jsxs(Ie,{children:[x,": ",(k(5)[2].guildTotal/1e12).toFixed(2)," T"]}),a.jsx(Ne,{onClick:()=>e("/main"),children:a.jsx(P,{})})]}),a.jsx(Ae,{children:a.jsxs(ie,{children:[a.jsx(F,{children:v.map(g=>a.jsx(S,{align:"center",children:a.jsx("b",{children:g})},g))}),a.jsx(le,{children:k(5)[2].topPlayers.map((g,b)=>{const _=y.find(E=>E.name===g)||{damage:0,guildTotal:1},u=[g,(_.damage/1e12).toFixed(2),`${(_.damage/_.guildTotal*100).toFixed(2)}%`,a.jsx(P,{})];return a.jsx(Re,{onClick:()=>e(`/details/${g}`),children:u.map((E,d)=>a.jsx(S,{align:"center",children:E},d))},b)})})]})})]})},Ee=l.div.withConfig({displayName:"Tops__Wrapper",componentId:"sc-weer54-0"})(["display:grid;grid-gap:1rem;grid-template-columns:calc(35% - 0.5rem) calc(65% - 0.5rem);@media ","{grid-template-columns:1fr;grid-row-gap:1rem;}"],({theme:e})=>e.breakpoints.maxTb),je=l.div.withConfig({displayName:"Tops__ChartBlock",componentId:"sc-weer54-1"})(["",";position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;"],B),Ae=l.div.withConfig({displayName:"Tops__TopsTable",componentId:"sc-weer54-2"})(["",";height:100%;display:flex;"],B),ke=l.div.withConfig({displayName:"Tops__DoughnutWrapper",componentId:"sc-weer54-3"})(["width:300px;display:flex;justify-content:center;"]),Ie=l.div.withConfig({displayName:"Tops__Text",componentId:"sc-weer54-4"})(["",";margin-top:0.5rem;text-align:center;"],U),Ne=l(W).withConfig({displayName:"Tops__Icon",componentId:"sc-weer54-5"})(["&.MuiSvgIcon-root{cursor:pointer;position:absolute;top:1rem;right:1rem;}"]),Re=l(F).withConfig({displayName:"Tops__Row",componentId:"sc-weer54-6"})(["&.MuiTableRow-root{position:relative;cursor:pointer;&:hover{background-color:rgba(83,158,236,0.6);}}"]);$.register(te,re,oe,ne,V,G,se);const Le=()=>{const{language:e}=f(N),{guildStatistic:o}=f(R),t=s.useMemo(()=>o.reduce((r,{date:n,total:c,rate:v,newbies:g})=>(r.labels.push(n),r.total.push(c),r.rate.push(v),r.newbies.push(g),r),{labels:[],total:[],rate:[],newbies:[]}),[]),i=s.useCallback((r,n)=>{if(!r)return n;const c=r.createLinearGradient(0,0,0,250);return c.addColorStop(0,n),c.addColorStop(1,"rgba(255, 255, 255, .4)"),c},[]),x=s.useCallback((r,n,c)=>({labels:t.labels,datasets:[{label:"value",data:n,borderColor:c,backgroundColor:i(r,c),tension:.3,fill:!0,pointBackgroundColor:c}]}),[t.labels,i]),m=r=>{const n="rgb(238 238 238)";return{scales:{x:{display:!0,grid:{color:n},border:{color:n}},y:{display:!0,grid:{color:n},border:{color:n}}},animation:{duration:2500,easing:"easeInOutQuart"},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:r},datalabels:{display:!1}}}},{TOTAL:p,RATE:w,NEW:h}=L(e),y=[{key:"total",color:"rgba(72, 99, 235, 0.7)",title:p},{key:"rate",color:"rgba(68, 217, 38, 0.7)",title:w},{key:"newbies",color:"rgba(235, 72, 99, 0.7)",title:h}];return a.jsx(Be,{children:y.map(({key:r,color:n,title:c})=>a.jsx(Se,{children:a.jsx(ae,{data:x(document.createElement("canvas").getContext("2d"),t[r],n),options:m(c)})},r))})},Be=l.div.withConfig({displayName:"Charts__Wrapper",componentId:"sc-19qerng-0"})(["display:grid;grid-template-columns:repeat(3,calc(33% - 0.5rem));grid-column-gap:1rem;@media ","{grid-template-columns:1fr;grid-row-gap:1rem;}"],({theme:e})=>e.breakpoints.maxTb),Se=l.div.withConfig({displayName:"Charts__Chart",componentId:"sc-19qerng-1"})(["",";background:",";border-radius:12px;padding-left:0.5rem;align-items:center;display:flex;"],B,({theme:e})=>e.colors.gray000),We=()=>{const e=Q();return s.useEffect(()=>{J.send({hitType:"dashboard",page:e.pathname})},[]),a.jsxs(De,{children:[a.jsx(be,{}),a.jsx(_e,{}),a.jsx(Le,{})]})},De=l.div.withConfig({displayName:"DashboardView__Wrapper",componentId:"sc-1o9rf4n-0"})(["height:100vh;padding:1rem 1rem 1.5rem;display:grid;grid-template-rows:calc(15% - 2rem) calc(58% - 2rem) auto;grid-row-gap:1rem;background-color:",";@media ","{height:100%;grid-template-rows:repeat(3,auto);}"],({theme:e})=>e.colors.gray000,({theme:e})=>e.breakpoints.maxTb);export{We as default};
